<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.12"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>vcpu Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<!-- end header part -->
<!-- Generated by Doxygen 1.8.12 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="classes.html"><span>Data&#160;Structure&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Data&#160;Fields</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a>  </div>
  <div class="headertitle">
<div class="title">vcpu Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="dynheader">
Inheritance diagram for vcpu:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classvcpu.png" usemap="#vcpu_map" alt=""/>
  <map id="vcpu_map" name="vcpu_map">
<area href="classvcpu__intel__x64.html" alt="vcpu_intel_x64" shape="rect" coords="0,56,97,80"/>
</map>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:aa0ae7467a6a8309795e3c23c87f963df"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvcpu.html#aa0ae7467a6a8309795e3c23c87f963df">vcpu</a> (int64_t <a class="el" href="classvcpu.html#ae8680bf73939c319614903e0aafeed59">id</a>)</td></tr>
<tr class="separator:aa0ae7467a6a8309795e3c23c87f963df"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa2ff8fcabd78438351ffe90ebbd13a4f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvcpu.html#aa2ff8fcabd78438351ffe90ebbd13a4f">vcpu</a> (int64_t <a class="el" href="classvcpu.html#ae8680bf73939c319614903e0aafeed59">id</a>, const std::shared_ptr&lt; <a class="el" href="classdebug__ring.html">debug_ring</a> &gt; &amp;dr)</td></tr>
<tr class="separator:aa2ff8fcabd78438351ffe90ebbd13a4f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad4fded8f0557a641ed316897a4de2f63"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvcpu.html#ad4fded8f0557a641ed316897a4de2f63">~vcpu</a> ()</td></tr>
<tr class="separator:ad4fded8f0557a641ed316897a4de2f63"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae8680bf73939c319614903e0aafeed59"><td class="memItemLeft" align="right" valign="top">virtual int64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvcpu.html#ae8680bf73939c319614903e0aafeed59">id</a> () const</td></tr>
<tr class="separator:ae8680bf73939c319614903e0aafeed59"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae2b25b801f6405fb6a3cf2967f596fa0"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvcpu.html#ae2b25b801f6405fb6a3cf2967f596fa0">start</a> ()</td></tr>
<tr class="separator:ae2b25b801f6405fb6a3cf2967f596fa0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acc55e157583d359730ff493a67428d8b"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvcpu.html#acc55e157583d359730ff493a67428d8b">dispatch</a> ()</td></tr>
<tr class="separator:acc55e157583d359730ff493a67428d8b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3ba3f12d26afec6dee67ec2be3a0c8d7"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvcpu.html#a3ba3f12d26afec6dee67ec2be3a0c8d7">stop</a> ()</td></tr>
<tr class="separator:a3ba3f12d26afec6dee67ec2be3a0c8d7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1530a50504aaf316eea765aa4d3966e4"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvcpu.html#a1530a50504aaf316eea765aa4d3966e4">halt</a> ()</td></tr>
<tr class="separator:a1530a50504aaf316eea765aa4d3966e4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a305f39712efecfd45de605cba85e6318"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvcpu.html#a305f39712efecfd45de605cba85e6318">promote</a> ()</td></tr>
<tr class="separator:a305f39712efecfd45de605cba85e6318"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a60c6fefe7690454edfef9615fb48da44"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvcpu.html#a60c6fefe7690454edfef9615fb48da44">write</a> (const std::string &amp;str)</td></tr>
<tr class="separator:a60c6fefe7690454edfef9615fb48da44"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Virtual CPU</p>
<p>The Virtual CPU represents a "CPU" to the hypervisor. Each core in a multi-core system has a vCPU associated with it. Each guest VM must also have a vCPU for each physical CPU on the system, which means that the total number of vCPUs being managed by the <a class="el" href="classvcpu__manager.html">vcpu_manager</a> is</p>
<div class="fragment"><div class="line"><span class="preprocessor">#cores + (#cores * #guests)</span></div></div><!-- fragment --><p>This generic vCPU class not only provides the base class that architecture specific vCPUs will be created from, but it also provides some of the base functionality that is common between all vCPUs. For example, all vCPUs have an "id" and a <a class="el" href="classdebug__ring.html">debug_ring</a>.</p>
<p>Note that these should not be created directly, but instead should be created by the <a class="el" href="classvcpu__manager.html">vcpu_manager</a>, which uses the <a class="el" href="classvcpu__factory.html">vcpu_factory</a> to actually create a vcpu. </p>

<p>Definition at line <a class="el" href="vcpu_8h_source.html#l00049">49</a> of file <a class="el" href="vcpu_8h_source.html">vcpu.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="aa0ae7467a6a8309795e3c23c87f963df"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">vcpu::vcpu </td>
          <td>(</td>
          <td class="paramtype">int64_t&#160;</td>
          <td class="paramname"><em>id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Constructor</p>
<p>Creates a vCPU with the provided id and default resources.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">id</td><td>the id of the vcpu </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">invalid_argument_error</td><td>if the id is invalid </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="vcpu_8cpp_source.html#l00027">27</a> of file <a class="el" href="vcpu_8cpp_source.html">vcpu.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="aa2ff8fcabd78438351ffe90ebbd13a4f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">vcpu::vcpu </td>
          <td>(</td>
          <td class="paramtype">int64_t&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::shared_ptr&lt; <a class="el" href="classdebug__ring.html">debug_ring</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>dr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Override Constructor</p>
<p>Creates a vCPU with the provided id and debug ring. This constructor provides a means to override and repalce the internal resources of the vCPU. Note that if one of the resources is set to NULL, a default will be constructed in it's place, providing a means to select which internal components to override.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">id</td><td>the id of the vcpu </td></tr>
    <tr><td class="paramname">dr</td><td>the debug ring the vcpu should use. If you provide nullptr, a default debug ring will be created. </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">invalid_argument_error</td><td>if the id is invalid </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="vcpu_8cpp_source.html#l00036">36</a> of file <a class="el" href="vcpu_8cpp_source.html">vcpu.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="ad4fded8f0557a641ed316897a4de2f63"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual vcpu::~vcpu </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Destructor </p>

<p>Definition at line <a class="el" href="vcpu_8h_source.html#l00079">79</a> of file <a class="el" href="vcpu_8h_source.html">vcpu.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="ae8680bf73939c319614903e0aafeed59"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual int64_t vcpu::id </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>vCPU Id</p>
<p>Returns the ID of the vCPU. This ID can be anything, but is only valid if it is between 0 &lt;= id &lt; MAX_CPUS</p>
<dl class="section return"><dt>Returns</dt><dd>the VPU's id </dd></dl>

<p>Definition at line <a class="el" href="vcpu_8h_source.html#l00088">88</a> of file <a class="el" href="vcpu_8h_source.html">vcpu.h</a>.</p>

</div>
</div>
<a class="anchor" id="ae2b25b801f6405fb6a3cf2967f596fa0"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void vcpu::start </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Start</p>
<p>Starts the vCPU. </p>

<p>Reimplemented in <a class="el" href="classvcpu__intel__x64.html#acef8315d6b5a161f865bb76dbd13172a">vcpu_intel_x64</a>.</p>

<p>Definition at line <a class="el" href="vcpu_8h_source.html#l00095">95</a> of file <a class="el" href="vcpu_8h_source.html">vcpu.h</a>.</p>

</div>
</div>
<a class="anchor" id="acc55e157583d359730ff493a67428d8b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void vcpu::dispatch </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Dispatch</p>
<p>Dispatches the exit handler for the vCPU. </p>

<p>Reimplemented in <a class="el" href="classvcpu__intel__x64.html#a67714777c18a98feb0c76272e86724dc">vcpu_intel_x64</a>.</p>

<p>Definition at line <a class="el" href="vcpu_8h_source.html#l00102">102</a> of file <a class="el" href="vcpu_8h_source.html">vcpu.h</a>.</p>

</div>
</div>
<a class="anchor" id="a3ba3f12d26afec6dee67ec2be3a0c8d7"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void vcpu::stop </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Stop</p>
<p>Stops the vCPU. </p>

<p>Reimplemented in <a class="el" href="classvcpu__intel__x64.html#ae33fd7d06f0b7a6bf13d51bd21ec535a">vcpu_intel_x64</a>.</p>

<p>Definition at line <a class="el" href="vcpu_8h_source.html#l00109">109</a> of file <a class="el" href="vcpu_8h_source.html">vcpu.h</a>.</p>

</div>
</div>
<a class="anchor" id="a1530a50504aaf316eea765aa4d3966e4"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void vcpu::halt </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Halt</p>
<p>Halts the vCPU. </p>

<p>Reimplemented in <a class="el" href="classvcpu__intel__x64.html#a04b9246edcb3b878a4e8f867f7ccece3">vcpu_intel_x64</a>.</p>

<p>Definition at line <a class="el" href="vcpu_8h_source.html#l00116">116</a> of file <a class="el" href="vcpu_8h_source.html">vcpu.h</a>.</p>

</div>
</div>
<a class="anchor" id="a305f39712efecfd45de605cba85e6318"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void vcpu::promote </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Promote</p>
<p>Promote the vCPU to host CPU state </p>

<p>Reimplemented in <a class="el" href="classvcpu__intel__x64.html#a6d28d7296f83cb54c47ef3bf9e1fafa6">vcpu_intel_x64</a>.</p>

<p>Definition at line <a class="el" href="vcpu_8h_source.html#l00123">123</a> of file <a class="el" href="vcpu_8h_source.html">vcpu.h</a>.</p>

</div>
</div>
<a class="anchor" id="a60c6fefe7690454edfef9615fb48da44"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void vcpu::write </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>str</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Write to Log</p>
<p>Writes to this specific vCPU's log. Note that this could be writing to more than one log, but is likely writing to the debug ring for this vCPU.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">str</td><td>the string to write to the log </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="vcpu_8h_source.html#l00134">134</a> of file <a class="el" href="vcpu_8h_source.html">vcpu.h</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>/home/user/hypervisor/bfvmm/include/vcpu/<a class="el" href="vcpu_8h_source.html">vcpu.h</a></li>
<li>/home/user/hypervisor/bfvmm/src/vcpu/src/<a class="el" href="vcpu_8cpp_source.html">vcpu.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Wed Apr 20 2016 18:22:04 by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.12
</small></address>
</body>
</html>
