<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.12"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Linux Driver Compilation Instructions</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<!-- end header part -->
<!-- Generated by Doxygen 1.8.12 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Linux Driver Compilation Instructions </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Supported Linux distributions are:</p><ul>
<li>Ubuntu 12.04, 14.04, 15.04, 15.10</li>
<li>Debian Jessie</li>
<li>Fedora 22, 23</li>
</ul>
<p>To compile bareflank, first start by downloading the repo, and running the setup-&lt;platform&gt;.sh script, which creates the cross compiler and sysroot that will be used later.</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;cd ~/</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;git clone https://github.com/Bareflank/hypervisor.git</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;cd ~/hypervisor</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;./tools/scripts/setup-ubuntu.sh</div></div><!-- fragment --><p>Once you have a cross compiler setup, you need to build the main source code. This can be done by doing the following:</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;make</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;make linux_load</div></div><!-- fragment --><p>To cleanup everything, run the following:</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;make linux_unload</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;make clean</div></div><!-- fragment --><h2>Usage Instructions</h2>
<p>To use the bareflank hypervisor, you will use the bareflank manager (bfm). This can be done manually by executing:</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;pushd bfm/bin/native</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;sudo LD_LIBRARY_PATH=. ./bfm load vmm.modules</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;sudo LD_LIBRARY_PATH=. ./bfm start</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;sudo LD_LIBRARY_PATH=. ./bfm status</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;sudo LD_LIBRARY_PATH=. ./bfm dump</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;popd</div></div><!-- fragment --><p>To stop the hypervisor, run the following:</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;pushd bfm/bin/native</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;sudo LD_LIBRARY_PATH=. ./bfm stop</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;sudo LD_LIBRARY_PATH=. ./bfm unload</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;popd</div></div><!-- fragment --><p>On Linux, you can also run the following shortcuts from the repo's root:</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;make load</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;make start</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;make stop</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;make unload</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;make quick</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;make status</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;make dump</div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;make loop NUM=&lt;xxx&gt;</div></div><!-- fragment --><p>When extending the hypervisor, you need to provide the list of modules you want to load. If you do this by hand, simply replace vmm.modules with your own. If however you use the shortcuts, do the following:</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;make [load|quick] MODULES=&lt;path to list&gt;</div></div><!-- fragment --><p>or</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;export MODULES=&lt;path to list&gt;</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;make [load|quick]</div></div><!-- fragment --> </div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Wed Apr 20 2016 15:38:39 by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.12
</small></address>
</body>
</html>
