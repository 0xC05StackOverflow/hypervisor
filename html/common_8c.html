<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>/home/user/hypervisor/bfdrivers/src/common.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_eae885c4b325bb89cc11c04efa49124b.html">bfdrivers</a></li><li class="navelem"><a class="el" href="dir_b4d672ce61df86380d6b627e9db98ce3.html">src</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">common.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><a href="common_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a24cf7f7686f105d84fa449da7706fb8d"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structmodule__t.html">module_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="common_8c.html#a24cf7f7686f105d84fa449da7706fb8d">get_module</a> (int64_t index)</td></tr>
<tr class="separator:a24cf7f7686f105d84fa449da7706fb8d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a54ac05510a78afd579f3c98775d5a900"><td class="memItemLeft" align="right" valign="top">uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="common_8c.html#a54ac05510a78afd579f3c98775d5a900">symbol_length</a> (const char *sym)</td></tr>
<tr class="separator:a54ac05510a78afd579f3c98775d5a900"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8288e764c4e316b000abbf7b3d9a3735"><td class="memItemLeft" align="right" valign="top">int64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="common_8c.html#a8288e764c4e316b000abbf7b3d9a3735">resolve_symbol</a> (const char *name, void **sym)</td></tr>
<tr class="separator:a8288e764c4e316b000abbf7b3d9a3735"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a86a6ac91adf695711bc2e76360fe5317"><td class="memItemLeft" align="right" valign="top">int64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="common_8c.html#a86a6ac91adf695711bc2e76360fe5317">execute_symbol</a> (const char *sym, uint64_t arg1, uint64_t arg2, uint64_t cpuid)</td></tr>
<tr class="separator:a86a6ac91adf695711bc2e76360fe5317"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8929ed8eb9b8c4aeccf17a66bd661689"><td class="memItemLeft" align="right" valign="top">int64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="common_8c.html#a8929ed8eb9b8c4aeccf17a66bd661689">add_raw_md_to_memory_manager</a> (uint64_t <a class="el" href="test__page__table__x64_8cpp.html#a6cd338072755a42673fecfed481aa36d">virt</a>, uint64_t type)</td></tr>
<tr class="separator:a8929ed8eb9b8c4aeccf17a66bd661689"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac9e8e8b32179aacb1a3d1ae2868622b5"><td class="memItemLeft" align="right" valign="top">int64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="common_8c.html#ac9e8e8b32179aacb1a3d1ae2868622b5">add_md_to_memory_manager</a> (struct <a class="el" href="structmodule__t.html">module_t</a> *module)</td></tr>
<tr class="separator:ac9e8e8b32179aacb1a3d1ae2868622b5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a88b399a93cd5a9b450f253f1f4db60bf"><td class="memItemLeft" align="right" valign="top">int64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="common_8c.html#a88b399a93cd5a9b450f253f1f4db60bf">load_elf_file</a> (struct <a class="el" href="structmodule__t.html">module_t</a> *module)</td></tr>
<tr class="separator:a88b399a93cd5a9b450f253f1f4db60bf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a949b680c8e310a5afd60e39557e19f5f"><td class="memItemLeft" align="right" valign="top">int64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="common_8c.html#a949b680c8e310a5afd60e39557e19f5f">common_vmm_status</a> (void)</td></tr>
<tr class="separator:a949b680c8e310a5afd60e39557e19f5f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7508a677661844c10da14b19e8e845cd"><td class="memItemLeft" align="right" valign="top">int64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="common_8c.html#a7508a677661844c10da14b19e8e845cd">common_reset</a> (void)</td></tr>
<tr class="separator:a7508a677661844c10da14b19e8e845cd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8bae38108aee8f7fb520c1aec93865d0"><td class="memItemLeft" align="right" valign="top">int64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="common_8c.html#a8bae38108aee8f7fb520c1aec93865d0">common_init</a> (void)</td></tr>
<tr class="separator:a8bae38108aee8f7fb520c1aec93865d0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aec2fa3bea24233f255422d9e6562da0a"><td class="memItemLeft" align="right" valign="top">int64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="common_8c.html#aec2fa3bea24233f255422d9e6562da0a">common_fini</a> (void)</td></tr>
<tr class="separator:aec2fa3bea24233f255422d9e6562da0a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6cab0f826ba4b89210893986c92ac84a"><td class="memItemLeft" align="right" valign="top">int64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="common_8c.html#a6cab0f826ba4b89210893986c92ac84a">common_add_module</a> (const char *<a class="el" href="classfile.html">file</a>, uint64_t fsize)</td></tr>
<tr class="separator:a6cab0f826ba4b89210893986c92ac84a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a744345384300e932fe03e1aac825a1e6"><td class="memItemLeft" align="right" valign="top">int64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="common_8c.html#a744345384300e932fe03e1aac825a1e6">common_load_vmm</a> (void)</td></tr>
<tr class="separator:a744345384300e932fe03e1aac825a1e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9b040b843908d209f5e164c311f36e0c"><td class="memItemLeft" align="right" valign="top">int64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="common_8c.html#a9b040b843908d209f5e164c311f36e0c">common_unload_vmm</a> (void)</td></tr>
<tr class="separator:a9b040b843908d209f5e164c311f36e0c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad20b88de4965639ad9733007b71c3df3"><td class="memItemLeft" align="right" valign="top">int64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="common_8c.html#ad20b88de4965639ad9733007b71c3df3">common_start_vmm</a> (void)</td></tr>
<tr class="separator:ad20b88de4965639ad9733007b71c3df3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab3b71a06efab28d0a2eb753d694398cc"><td class="memItemLeft" align="right" valign="top">int64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="common_8c.html#ab3b71a06efab28d0a2eb753d694398cc">common_stop_vmm</a> (void)</td></tr>
<tr class="separator:ab3b71a06efab28d0a2eb753d694398cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0f31ba8d4ba0c5dc54e889e97dbd0be8"><td class="memItemLeft" align="right" valign="top">int64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="common_8c.html#a0f31ba8d4ba0c5dc54e889e97dbd0be8">common_dump_vmm</a> (struct <a class="el" href="structdebug__ring__resources__t.html">debug_ring_resources_t</a> **<a class="el" href="test__debug__ring_8cpp.html#ae26a2456daebadee1c1bde823af67a29">drr</a>, uint64_t vcpuid)</td></tr>
<tr class="separator:a0f31ba8d4ba0c5dc54e889e97dbd0be8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5140b2e2de68ffee1b3beb060b763f46"><td class="memItemLeft" align="right" valign="top">int64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="common_8c.html#a5140b2e2de68ffee1b3beb060b763f46">common_vmcall</a> (struct <a class="el" href="structvmcall__registers__t.html">vmcall_registers_t</a> *regs, uint64_t cpuid)</td></tr>
<tr class="separator:a5140b2e2de68ffee1b3beb060b763f46"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:aebaeb76dfd117be41a7509cf76a09429"><td class="memItemLeft" align="right" valign="top">int64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="common_8c.html#aebaeb76dfd117be41a7509cf76a09429">g_vmm_status</a> = <a class="el" href="driver__entry__interface_8h.html#a9554436108723afdf5f8fd7996909bd0">VMM_UNLOADED</a></td></tr>
<tr class="separator:aebaeb76dfd117be41a7509cf76a09429"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa3408eeb95ee546adcb01e4757a4e23b"><td class="memItemLeft" align="right" valign="top">int64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="common_8c.html#aa3408eeb95ee546adcb01e4757a4e23b">g_num_modules</a> = 0</td></tr>
<tr class="separator:aa3408eeb95ee546adcb01e4757a4e23b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a641c3e887c4d48e8b28bb74e8b3bc383"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structmodule__t.html">module_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="common_8c.html#a641c3e887c4d48e8b28bb74e8b3bc383">g_modules</a> [<a class="el" href="constants_8h.html#ab5fdce3a6fd51066fb321ec67ef032cf">MAX_NUM_MODULES</a>]</td></tr>
<tr class="separator:a641c3e887c4d48e8b28bb74e8b3bc383"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1a991051ee87c726087c41cffc70a9b3"><td class="memItemLeft" align="right" valign="top">struct bfelf_loader_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="common_8c.html#a1a991051ee87c726087c41cffc70a9b3">g_loader</a></td></tr>
<tr class="separator:a1a991051ee87c726087c41cffc70a9b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad81bc7de879d6b7fd0505b54f48a4149"><td class="memItemLeft" align="right" valign="top">int64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="common_8c.html#ad81bc7de879d6b7fd0505b54f48a4149">g_num_cpus_started</a> = 0</td></tr>
<tr class="separator:ad81bc7de879d6b7fd0505b54f48a4149"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac80603793478f53cc5f1cc815f172473"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="common_8c.html#ac80603793478f53cc5f1cc815f172473">g_tls</a> = 0</td></tr>
<tr class="separator:ac80603793478f53cc5f1cc815f172473"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a06563707ed698cdb84cef1ae8b993496"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="common_8c.html#a06563707ed698cdb84cef1ae8b993496">g_stack</a> = 0</td></tr>
<tr class="separator:a06563707ed698cdb84cef1ae8b993496"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7b636d81fbf245461094dae0debae138"><td class="memItemLeft" align="right" valign="top">uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="common_8c.html#a7b636d81fbf245461094dae0debae138">g_tls_size</a> = 0</td></tr>
<tr class="separator:a7b636d81fbf245461094dae0debae138"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9c28aa628d63dfd71b73f6b7f9da4029"><td class="memItemLeft" align="right" valign="top">uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="common_8c.html#a9c28aa628d63dfd71b73f6b7f9da4029">g_stack_size</a> = 0</td></tr>
<tr class="separator:a9c28aa628d63dfd71b73f6b7f9da4029"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a88e8c670c6251fee83fb452b23359251"><td class="memItemLeft" align="right" valign="top">uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="common_8c.html#a88e8c670c6251fee83fb452b23359251">g_stack_top</a> = 0</td></tr>
<tr class="separator:a88e8c670c6251fee83fb452b23359251"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7fd585e15bd751caa76760feb3453f73"><td class="memItemLeft" align="right" valign="top"><a class="el" href="include_2entry_8h.html#a29d3b1f4f75b96d7a9ea10941fa9baa5">execute_entry_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="common_8c.html#a7fd585e15bd751caa76760feb3453f73">execute_entry</a> = 0</td></tr>
<tr class="separator:a7fd585e15bd751caa76760feb3453f73"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="a24cf7f7686f105d84fa449da7706fb8d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a24cf7f7686f105d84fa449da7706fb8d">&#9670;&nbsp;</a></span>get_module()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structmodule__t.html">module_t</a>* get_module </td>
          <td>(</td>
          <td class="paramtype">int64_t&#160;</td>
          <td class="paramname"><em>index</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="common_8c_source.html#l00064">64</a> of file <a class="el" href="common_8c_source.html">common.c</a>.</p>

</div>
</div>
<a id="a54ac05510a78afd579f3c98775d5a900"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a54ac05510a78afd579f3c98775d5a900">&#9670;&nbsp;</a></span>symbol_length()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t symbol_length </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>sym</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="common_8c_source.html#l00073">73</a> of file <a class="el" href="common_8c_source.html">common.c</a>.</p>

</div>
</div>
<a id="a8288e764c4e316b000abbf7b3d9a3735"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8288e764c4e316b000abbf7b3d9a3735">&#9670;&nbsp;</a></span>resolve_symbol()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int64_t resolve_symbol </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void **&#160;</td>
          <td class="paramname"><em>sym</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="common_8c_source.html#l00087">87</a> of file <a class="el" href="common_8c_source.html">common.c</a>.</p>

</div>
</div>
<a id="a86a6ac91adf695711bc2e76360fe5317"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a86a6ac91adf695711bc2e76360fe5317">&#9670;&nbsp;</a></span>execute_symbol()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int64_t execute_symbol </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>sym</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>arg1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>arg2</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>cpuid</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="common_8c_source.html#l00108">108</a> of file <a class="el" href="common_8c_source.html">common.c</a>.</p>

</div>
</div>
<a id="a8929ed8eb9b8c4aeccf17a66bd661689"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8929ed8eb9b8c4aeccf17a66bd661689">&#9670;&nbsp;</a></span>add_raw_md_to_memory_manager()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int64_t add_raw_md_to_memory_manager </td>
          <td>(</td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>virt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>type</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="common_8c_source.html#l00135">135</a> of file <a class="el" href="common_8c_source.html">common.c</a>.</p>

</div>
</div>
<a id="ac9e8e8b32179aacb1a3d1ae2868622b5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac9e8e8b32179aacb1a3d1ae2868622b5">&#9670;&nbsp;</a></span>add_md_to_memory_manager()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int64_t add_md_to_memory_manager </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmodule__t.html">module_t</a> *&#160;</td>
          <td class="paramname"><em>module</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="common_8c_source.html#l00152">152</a> of file <a class="el" href="common_8c_source.html">common.c</a>.</p>

</div>
</div>
<a id="a88b399a93cd5a9b450f253f1f4db60bf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a88b399a93cd5a9b450f253f1f4db60bf">&#9670;&nbsp;</a></span>load_elf_file()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int64_t load_elf_file </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmodule__t.html">module_t</a> *&#160;</td>
          <td class="paramname"><em>module</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="common_8c_source.html#l00191">191</a> of file <a class="el" href="common_8c_source.html">common.c</a>.</p>

</div>
</div>
<a id="a949b680c8e310a5afd60e39557e19f5f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a949b680c8e310a5afd60e39557e19f5f">&#9670;&nbsp;</a></span>common_vmm_status()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int64_t common_vmm_status </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>VMM Status</p>
<dl class="section return"><dt>Returns</dt><dd>returns the current status of the VMM. </dd></dl>

<p class="definition">Definition at line <a class="el" href="common_8c_source.html#l00227">227</a> of file <a class="el" href="common_8c_source.html">common.c</a>.</p>

</div>
</div>
<a id="a7508a677661844c10da14b19e8e845cd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7508a677661844c10da14b19e8e845cd">&#9670;&nbsp;</a></span>common_reset()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int64_t common_reset </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Reset</p>
<p>This function should not be called directly. Instead, use common_unload. This is only exposed publically for unit testing.</p>
<dl class="section return"><dt>Returns</dt><dd>will always return BF_SUCCESS </dd></dl>

<p class="definition">Definition at line <a class="el" href="common_8c_source.html#l00233">233</a> of file <a class="el" href="common_8c_source.html">common.c</a>.</p>

</div>
</div>
<a id="a8bae38108aee8f7fb520c1aec93865d0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8bae38108aee8f7fb520c1aec93865d0">&#9670;&nbsp;</a></span>common_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int64_t common_init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Initialize Driver Entry</p>
<p>This code should be run as part of the driver entry's init code. This sets up some resources that are needed throughout the lifetime of the driver entry.</p>
<dl class="section return"><dt>Returns</dt><dd>BF_SUCCESS on success, negative error code on failure </dd></dl>

<p class="definition">Definition at line <a class="el" href="common_8c_source.html#l00267">267</a> of file <a class="el" href="common_8c_source.html">common.c</a>.</p>

</div>
</div>
<a id="aec2fa3bea24233f255422d9e6562da0a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aec2fa3bea24233f255422d9e6562da0a">&#9670;&nbsp;</a></span>common_fini()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int64_t common_fini </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Finalize Driver Entry</p>
<p>This code should be run as part of the driver entry's fini code. This cleans up some resources that were needed throughout the lifetime of the driver entry.</p>
<dl class="section return"><dt>Returns</dt><dd>BF_SUCCESS on success, negative error code on failure </dd></dl>

<p class="definition">Definition at line <a class="el" href="common_8c_source.html#l00273">273</a> of file <a class="el" href="common_8c_source.html">common.c</a>.</p>

</div>
</div>
<a id="a6cab0f826ba4b89210893986c92ac84a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6cab0f826ba4b89210893986c92ac84a">&#9670;&nbsp;</a></span>common_add_module()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int64_t common_add_module </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>fsize</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Add Module</p>
<p>Add's a module into memory to be executed once start_vmm is run. This function uses the platform functions to allocate memory for the executable. The file that is provided should not be removed until after stop_vmm is run. Removing the file from memory could cause a crash, as the start_vmm function uses the file that is being added to search for symbols that are needed, as well as the stop_vmm function. Once stop_vmm is run, it's safe to remove the files. Also, this function cannot be run if the vmm has already been started.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">file</td><td>the file to add to memory </td></tr>
    <tr><td class="paramname">fsize</td><td>the size of the file in bytes </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>BF_SUCCESS on success, negative error code on failure </dd></dl>

<p class="definition">Definition at line <a class="el" href="common_8c_source.html#l00305">305</a> of file <a class="el" href="common_8c_source.html">common.c</a>.</p>

</div>
</div>
<a id="a744345384300e932fe03e1aac825a1e6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a744345384300e932fe03e1aac825a1e6">&#9670;&nbsp;</a></span>common_load_vmm()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int64_t common_load_vmm </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Load VMM</p>
<p>This function loads the vmm (assuming that the modules that were loaded are actually a vmm). Once a VMM is loaded, it is placed in memory, and all of the modules are properly reloacted such that, code within each module is now capable of executing.</p>
<dl class="section return"><dt>Returns</dt><dd>BF_SUCCESS on success, negative error code on failure </dd></dl>

<p class="definition">Definition at line <a class="el" href="common_8c_source.html#l00357">357</a> of file <a class="el" href="common_8c_source.html">common.c</a>.</p>

</div>
</div>
<a id="a9b040b843908d209f5e164c311f36e0c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9b040b843908d209f5e164c311f36e0c">&#9670;&nbsp;</a></span>common_unload_vmm()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int64_t common_unload_vmm </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Unload VMM</p>
<p>This function unloads the vmm. Once the VMM is unloaded, all of the symbols for the VMM are removed from memory, and are no longer accessible. The VMM cannot be unloaded unless the VMM is already loaded, but is not running.</p>
<dl class="section return"><dt>Returns</dt><dd>BF_SUCCESS on success, negative error code on failure </dd></dl>

<p class="definition">Definition at line <a class="el" href="common_8c_source.html#l00451">451</a> of file <a class="el" href="common_8c_source.html">common.c</a>.</p>

</div>
</div>
<a id="ad20b88de4965639ad9733007b71c3df3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad20b88de4965639ad9733007b71c3df3">&#9670;&nbsp;</a></span>common_start_vmm()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int64_t common_start_vmm </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Start VMM</p>
<p>This function starts the vmm. Before the VMM can be started, it must first be loaded.</p>
<dl class="section return"><dt>Returns</dt><dd>BF_SUCCESS on success, negative error code on failure </dd></dl>

<p class="definition">Definition at line <a class="el" href="common_8c_source.html#l00490">490</a> of file <a class="el" href="common_8c_source.html">common.c</a>.</p>

</div>
</div>
<a id="ab3b71a06efab28d0a2eb753d694398cc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab3b71a06efab28d0a2eb753d694398cc">&#9670;&nbsp;</a></span>common_stop_vmm()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int64_t common_stop_vmm </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Stop VMM</p>
<p>This function stops the vmm. Before a VMM can be stopped, it must first be loaded, and running.</p>
<dl class="section return"><dt>Returns</dt><dd>BF_SUCCESS on success, negative error code on failure </dd></dl>

<p class="definition">Definition at line <a class="el" href="common_8c_source.html#l00543">543</a> of file <a class="el" href="common_8c_source.html">common.c</a>.</p>

</div>
</div>
<a id="a0f31ba8d4ba0c5dc54e889e97dbd0be8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0f31ba8d4ba0c5dc54e889e97dbd0be8">&#9670;&nbsp;</a></span>common_dump_vmm()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int64_t common_dump_vmm </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structdebug__ring__resources__t.html">debug_ring_resources_t</a> **&#160;</td>
          <td class="paramname"><em>drr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>vcpuid</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Dump VMM</p>
<p>This grabs the conents of the debug ring, and dumps the contents to the driver entry's console. This is one of a couple of ways to get feedback from the VMM. Note that the VMM must at least be loaded for this function to work as it has to do a symbol lookup</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">drr</td><td>a pointer to the drr provided by the user </td></tr>
    <tr><td class="paramname">vcpuid</td><td>indicates which drr to get as each vcpu has its own drr </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>BF_SUCCESS on success, negative error code on failure </dd></dl>

<p class="definition">Definition at line <a class="el" href="common_8c_source.html#l00592">592</a> of file <a class="el" href="common_8c_source.html">common.c</a>.</p>

</div>
</div>
<a id="a5140b2e2de68ffee1b3beb060b763f46"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5140b2e2de68ffee1b3beb060b763f46">&#9670;&nbsp;</a></span>common_vmcall()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int64_t common_vmcall </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structvmcall__registers__t.html">vmcall_registers_t</a> *&#160;</td>
          <td class="paramname"><em>regs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>cpuid</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>VMCall</p>
<p>This performs a vmcall on the requested CPU.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">regs</td><td>the vmcall registers used in the vmcall </td></tr>
    <tr><td class="paramname">cpuid</td><td>indicates which cpu to vmcall </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>BF_SUCCESS on success, negative error code on failure </dd></dl>

<p class="definition">Definition at line <a class="el" href="common_8c_source.html#l00610">610</a> of file <a class="el" href="common_8c_source.html">common.c</a>.</p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="aebaeb76dfd117be41a7509cf76a09429"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aebaeb76dfd117be41a7509cf76a09429">&#9670;&nbsp;</a></span>g_vmm_status</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int64_t g_vmm_status = <a class="el" href="driver__entry__interface_8h.html#a9554436108723afdf5f8fd7996909bd0">VMM_UNLOADED</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="common_8c_source.html#l00037">37</a> of file <a class="el" href="common_8c_source.html">common.c</a>.</p>

</div>
</div>
<a id="aa3408eeb95ee546adcb01e4757a4e23b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa3408eeb95ee546adcb01e4757a4e23b">&#9670;&nbsp;</a></span>g_num_modules</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int64_t g_num_modules = 0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="common_8c_source.html#l00039">39</a> of file <a class="el" href="common_8c_source.html">common.c</a>.</p>

</div>
</div>
<a id="a641c3e887c4d48e8b28bb74e8b3bc383"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a641c3e887c4d48e8b28bb74e8b3bc383">&#9670;&nbsp;</a></span>g_modules</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structmodule__t.html">module_t</a> g_modules[<a class="el" href="constants_8h.html#ab5fdce3a6fd51066fb321ec67ef032cf">MAX_NUM_MODULES</a>]</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="common_8c_source.html#l00040">40</a> of file <a class="el" href="common_8c_source.html">common.c</a>.</p>

</div>
</div>
<a id="a1a991051ee87c726087c41cffc70a9b3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1a991051ee87c726087c41cffc70a9b3">&#9670;&nbsp;</a></span>g_loader</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct bfelf_loader_t g_loader</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="common_8c_source.html#l00042">42</a> of file <a class="el" href="common_8c_source.html">common.c</a>.</p>

</div>
</div>
<a id="ad81bc7de879d6b7fd0505b54f48a4149"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad81bc7de879d6b7fd0505b54f48a4149">&#9670;&nbsp;</a></span>g_num_cpus_started</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int64_t g_num_cpus_started = 0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="common_8c_source.html#l00044">44</a> of file <a class="el" href="common_8c_source.html">common.c</a>.</p>

</div>
</div>
<a id="ac80603793478f53cc5f1cc815f172473"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac80603793478f53cc5f1cc815f172473">&#9670;&nbsp;</a></span>g_tls</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void* g_tls = 0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="common_8c_source.html#l00046">46</a> of file <a class="el" href="common_8c_source.html">common.c</a>.</p>

</div>
</div>
<a id="a06563707ed698cdb84cef1ae8b993496"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a06563707ed698cdb84cef1ae8b993496">&#9670;&nbsp;</a></span>g_stack</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void* g_stack = 0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="common_8c_source.html#l00047">47</a> of file <a class="el" href="common_8c_source.html">common.c</a>.</p>

</div>
</div>
<a id="a7b636d81fbf245461094dae0debae138"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7b636d81fbf245461094dae0debae138">&#9670;&nbsp;</a></span>g_tls_size</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t g_tls_size = 0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="common_8c_source.html#l00049">49</a> of file <a class="el" href="common_8c_source.html">common.c</a>.</p>

</div>
</div>
<a id="a9c28aa628d63dfd71b73f6b7f9da4029"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9c28aa628d63dfd71b73f6b7f9da4029">&#9670;&nbsp;</a></span>g_stack_size</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t g_stack_size = 0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="common_8c_source.html#l00050">50</a> of file <a class="el" href="common_8c_source.html">common.c</a>.</p>

</div>
</div>
<a id="a88e8c670c6251fee83fb452b23359251"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a88e8c670c6251fee83fb452b23359251">&#9670;&nbsp;</a></span>g_stack_top</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t g_stack_top = 0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="common_8c_source.html#l00051">51</a> of file <a class="el" href="common_8c_source.html">common.c</a>.</p>

</div>
</div>
<a id="a7fd585e15bd751caa76760feb3453f73"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7fd585e15bd751caa76760feb3453f73">&#9670;&nbsp;</a></span>execute_entry</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="include_2entry_8h.html#a29d3b1f4f75b96d7a9ea10941fa9baa5">execute_entry_t</a> execute_entry = 0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="common_8c_source.html#l00057">57</a> of file <a class="el" href="common_8c_source.html">common.c</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Apr 28 2017 21:30:48 by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.14
</small></address>
</body>
</html>
