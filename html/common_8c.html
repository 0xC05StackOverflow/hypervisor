<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.12"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>/home/user/hypervisor/bfdrivers/src/common.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<!-- end header part -->
<!-- Generated by Doxygen 1.8.12 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_eae885c4b325bb89cc11c04efa49124b.html">bfdrivers</a></li><li class="navelem"><a class="el" href="dir_b4d672ce61df86380d6b627e9db98ce3.html">src</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">common.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><a href="common_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a3571fec697e0e795dd796be0334c9d3d"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structmodule__t.html">module_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="common_8c.html#a3571fec697e0e795dd796be0334c9d3d">get_module</a> (uint64_t index)</td></tr>
<tr class="separator:a3571fec697e0e795dd796be0334c9d3d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af375c36227615b087ba9025af6a31fa1"><td class="memItemLeft" align="right" valign="top">int64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="common_8c.html#af375c36227615b087ba9025af6a31fa1">symbol_length</a> (const char *sym)</td></tr>
<tr class="separator:af375c36227615b087ba9025af6a31fa1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8288e764c4e316b000abbf7b3d9a3735"><td class="memItemLeft" align="right" valign="top">int64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="common_8c.html#a8288e764c4e316b000abbf7b3d9a3735">resolve_symbol</a> (const char *name, void **sym)</td></tr>
<tr class="separator:a8288e764c4e316b000abbf7b3d9a3735"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a94e89cdeb558fb47d50ec6000a8b87b9"><td class="memItemLeft" align="right" valign="top">int64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="common_8c.html#a94e89cdeb558fb47d50ec6000a8b87b9">execute_symbol</a> (const char *sym, int64_t arg)</td></tr>
<tr class="separator:a94e89cdeb558fb47d50ec6000a8b87b9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a47681194c8c2cc4a701bf0728e983845"><td class="memItemLeft" align="right" valign="top">int64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="common_8c.html#a47681194c8c2cc4a701bf0728e983845">add_mdl_to_memory_manager</a> (char *exec, uint64_t size)</td></tr>
<tr class="separator:a47681194c8c2cc4a701bf0728e983845"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a12a77d93f31877f0e41460464ab476a5"><td class="memItemLeft" align="right" valign="top">uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="common_8c.html#a12a77d93f31877f0e41460464ab476a5">get_elf_file_size</a> (struct <a class="el" href="structbfelf__file__t.html">bfelf_file_t</a> *ef)</td></tr>
<tr class="separator:a12a77d93f31877f0e41460464ab476a5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a65221c093d032ce7e2910f6dda9e47ba"><td class="memItemLeft" align="right" valign="top">int64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="common_8c.html#a65221c093d032ce7e2910f6dda9e47ba">load_elf_file</a> (struct <a class="el" href="structbfelf__file__t.html">bfelf_file_t</a> *ef, char *exec, uint64_t size)</td></tr>
<tr class="separator:a65221c093d032ce7e2910f6dda9e47ba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a949b680c8e310a5afd60e39557e19f5f"><td class="memItemLeft" align="right" valign="top">int64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="common_8c.html#a949b680c8e310a5afd60e39557e19f5f">common_vmm_status</a> (void)</td></tr>
<tr class="separator:a949b680c8e310a5afd60e39557e19f5f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7508a677661844c10da14b19e8e845cd"><td class="memItemLeft" align="right" valign="top">int64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="common_8c.html#a7508a677661844c10da14b19e8e845cd">common_reset</a> (void)</td></tr>
<tr class="separator:a7508a677661844c10da14b19e8e845cd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8bae38108aee8f7fb520c1aec93865d0"><td class="memItemLeft" align="right" valign="top">int64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="common_8c.html#a8bae38108aee8f7fb520c1aec93865d0">common_init</a> (void)</td></tr>
<tr class="separator:a8bae38108aee8f7fb520c1aec93865d0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aec2fa3bea24233f255422d9e6562da0a"><td class="memItemLeft" align="right" valign="top">int64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="common_8c.html#aec2fa3bea24233f255422d9e6562da0a">common_fini</a> (void)</td></tr>
<tr class="separator:aec2fa3bea24233f255422d9e6562da0a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a22513f02b85c67081ee4ee0a21ab298e"><td class="memItemLeft" align="right" valign="top">int64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="common_8c.html#a22513f02b85c67081ee4ee0a21ab298e">common_add_module</a> (char *<a class="el" href="classfile.html">file</a>, int64_t fsize)</td></tr>
<tr class="separator:a22513f02b85c67081ee4ee0a21ab298e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a744345384300e932fe03e1aac825a1e6"><td class="memItemLeft" align="right" valign="top">int64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="common_8c.html#a744345384300e932fe03e1aac825a1e6">common_load_vmm</a> (void)</td></tr>
<tr class="separator:a744345384300e932fe03e1aac825a1e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9b040b843908d209f5e164c311f36e0c"><td class="memItemLeft" align="right" valign="top">int64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="common_8c.html#a9b040b843908d209f5e164c311f36e0c">common_unload_vmm</a> (void)</td></tr>
<tr class="separator:a9b040b843908d209f5e164c311f36e0c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad20b88de4965639ad9733007b71c3df3"><td class="memItemLeft" align="right" valign="top">int64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="common_8c.html#ad20b88de4965639ad9733007b71c3df3">common_start_vmm</a> (void)</td></tr>
<tr class="separator:ad20b88de4965639ad9733007b71c3df3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab3b71a06efab28d0a2eb753d694398cc"><td class="memItemLeft" align="right" valign="top">int64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="common_8c.html#ab3b71a06efab28d0a2eb753d694398cc">common_stop_vmm</a> (void)</td></tr>
<tr class="separator:ab3b71a06efab28d0a2eb753d694398cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abf236e7b72c0c1569af1cbe809b6d485"><td class="memItemLeft" align="right" valign="top">int64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="common_8c.html#abf236e7b72c0c1569af1cbe809b6d485">common_dump_vmm</a> (struct <a class="el" href="structdebug__ring__resources__t.html">debug_ring_resources_t</a> **<a class="el" href="test__debug__ring_8cpp.html#ae26a2456daebadee1c1bde823af67a29">drr</a>)</td></tr>
<tr class="separator:abf236e7b72c0c1569af1cbe809b6d485"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:aebaeb76dfd117be41a7509cf76a09429"><td class="memItemLeft" align="right" valign="top">int64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="common_8c.html#aebaeb76dfd117be41a7509cf76a09429">g_vmm_status</a> = <a class="el" href="driver__entry__interface_8h.html#a9554436108723afdf5f8fd7996909bd0">VMM_UNLOADED</a></td></tr>
<tr class="separator:aebaeb76dfd117be41a7509cf76a09429"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aece5121b2c037e04e651b2847773ae31"><td class="memItemLeft" align="right" valign="top">uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="common_8c.html#aece5121b2c037e04e651b2847773ae31">g_num_modules</a> = 0</td></tr>
<tr class="separator:aece5121b2c037e04e651b2847773ae31"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a641c3e887c4d48e8b28bb74e8b3bc383"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structmodule__t.html">module_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="common_8c.html#a641c3e887c4d48e8b28bb74e8b3bc383">g_modules</a> [<a class="el" href="constants_8h.html#ab5fdce3a6fd51066fb321ec67ef032cf">MAX_NUM_MODULES</a>] = {{0}}</td></tr>
<tr class="separator:a641c3e887c4d48e8b28bb74e8b3bc383"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1a991051ee87c726087c41cffc70a9b3"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structbfelf__loader__t.html">bfelf_loader_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="common_8c.html#a1a991051ee87c726087c41cffc70a9b3">g_loader</a></td></tr>
<tr class="separator:a1a991051ee87c726087c41cffc70a9b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a3571fec697e0e795dd796be0334c9d3d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structmodule__t.html">module_t</a>* get_module </td>
          <td>(</td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>index</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="common_8c_source.html#l00048">48</a> of file <a class="el" href="common_8c_source.html">common.c</a>.</p>

</div>
</div>
<a class="anchor" id="af375c36227615b087ba9025af6a31fa1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int64_t symbol_length </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>sym</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="common_8c_source.html#l00057">57</a> of file <a class="el" href="common_8c_source.html">common.c</a>.</p>

</div>
</div>
<a class="anchor" id="a8288e764c4e316b000abbf7b3d9a3735"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int64_t resolve_symbol </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void **&#160;</td>
          <td class="paramname"><em>sym</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="common_8c_source.html#l00071">71</a> of file <a class="el" href="common_8c_source.html">common.c</a>.</p>

</div>
</div>
<a class="anchor" id="a94e89cdeb558fb47d50ec6000a8b87b9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int64_t execute_symbol </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>sym</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int64_t&#160;</td>
          <td class="paramname"><em>arg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="common_8c_source.html#l00097">97</a> of file <a class="el" href="common_8c_source.html">common.c</a>.</p>

</div>
</div>
<a class="anchor" id="a47681194c8c2cc4a701bf0728e983845"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int64_t add_mdl_to_memory_manager </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>exec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="common_8c_source.html#l00132">132</a> of file <a class="el" href="common_8c_source.html">common.c</a>.</p>

</div>
</div>
<a class="anchor" id="a12a77d93f31877f0e41460464ab476a5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t get_elf_file_size </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structbfelf__file__t.html">bfelf_file_t</a> *&#160;</td>
          <td class="paramname"><em>ef</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="common_8c_source.html#l00188">188</a> of file <a class="el" href="common_8c_source.html">common.c</a>.</p>

</div>
</div>
<a class="anchor" id="a65221c093d032ce7e2910f6dda9e47ba"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int64_t load_elf_file </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structbfelf__file__t.html">bfelf_file_t</a> *&#160;</td>
          <td class="paramname"><em>ef</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>exec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="common_8c_source.html#l00214">214</a> of file <a class="el" href="common_8c_source.html">common.c</a>.</p>

</div>
</div>
<a class="anchor" id="a949b680c8e310a5afd60e39557e19f5f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int64_t common_vmm_status </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>VMM Status</p>
<dl class="section return"><dt>Returns</dt><dd>returns the current status of the VMM. </dd></dl>

<p>Definition at line <a class="el" href="common_8c_source.html#l00245">245</a> of file <a class="el" href="common_8c_source.html">common.c</a>.</p>

</div>
</div>
<a class="anchor" id="a7508a677661844c10da14b19e8e845cd"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int64_t common_reset </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Reset</p>
<p>This function should not be called directly. Instead, use common_unload. This is only exposed publically for unit testing.</p>
<dl class="section return"><dt>Returns</dt><dd>will always return BF_SUCCESS </dd></dl>

<p>Definition at line <a class="el" href="common_8c_source.html#l00251">251</a> of file <a class="el" href="common_8c_source.html">common.c</a>.</p>

</div>
</div>
<a class="anchor" id="a8bae38108aee8f7fb520c1aec93865d0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int64_t common_init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Initialize Driver Entry</p>
<p>This code should be run as part of the driver entry's init code. This sets up some resources that are needed throughout the lifetime of the driver entry.</p>
<dl class="section return"><dt>Returns</dt><dd>BF_SUCCESS on success, negative error code on failure </dd></dl>

<p>Definition at line <a class="el" href="common_8c_source.html#l00274">274</a> of file <a class="el" href="common_8c_source.html">common.c</a>.</p>

</div>
</div>
<a class="anchor" id="aec2fa3bea24233f255422d9e6562da0a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int64_t common_fini </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Finalize Driver Entry</p>
<p>This code should be run as part of the driver entry's fini code. This cleans up some resources that were needed throughout the lifetime of the driver entry.</p>
<dl class="section return"><dt>Returns</dt><dd>BF_SUCCESS on success, negative error code on failure </dd></dl>

<p>Definition at line <a class="el" href="common_8c_source.html#l00280">280</a> of file <a class="el" href="common_8c_source.html">common.c</a>.</p>

</div>
</div>
<a class="anchor" id="a22513f02b85c67081ee4ee0a21ab298e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int64_t common_add_module </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int64_t&#160;</td>
          <td class="paramname"><em>fsize</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Add Module</p>
<p>Add's a module into memory to be executed once start_vmm is run. This function uses the platform functions to allocate memory for the executable. The file that is provided should not be removed until after stop_vmm is run. Removing the file from memory could cause a crash, as the start_vmm function uses the file that is being added to search for symbols that are needed, as well as the stop_vmm function. Once stop_vmm is run, it's safe to remove the files. Also, this function cannot be run if the vmm has already been started.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">file</td><td>the file to add to memory </td></tr>
    <tr><td class="paramname">fsize</td><td>the size of the file in bytes </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>BF_SUCCESS on success, negative error code on failure </dd></dl>

<p>Definition at line <a class="el" href="common_8c_source.html#l00312">312</a> of file <a class="el" href="common_8c_source.html">common.c</a>.</p>

</div>
</div>
<a class="anchor" id="a744345384300e932fe03e1aac825a1e6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int64_t common_load_vmm </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Load VMM</p>
<p>This function loads the vmm (assuming that the modules that were loaded are actually a vmm). Once a VMM is loaded, it is placed in memory, and all of the modules are properly reloacted such that, code within each module is now capable of executing.</p>
<dl class="section return"><dt>Returns</dt><dd>BF_SUCCESS on success, negative error code on failure </dd></dl>

<p>Definition at line <a class="el" href="common_8c_source.html#l00394">394</a> of file <a class="el" href="common_8c_source.html">common.c</a>.</p>

</div>
</div>
<a class="anchor" id="a9b040b843908d209f5e164c311f36e0c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int64_t common_unload_vmm </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Unload VMM</p>
<p>This function unloads the vmm. Once the VMM is unloaded, all of the symboles for the VMM are removed from memory, and are no longer accessible. The VMM cannot be unloaded unless the VMM is already loaded, but is not running.</p>
<dl class="section return"><dt>Returns</dt><dd>BF_SUCCESS on success, negative error code on failure </dd></dl>

<p>Definition at line <a class="el" href="common_8c_source.html#l00480">480</a> of file <a class="el" href="common_8c_source.html">common.c</a>.</p>

</div>
</div>
<a class="anchor" id="ad20b88de4965639ad9733007b71c3df3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int64_t common_start_vmm </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Start VMM</p>
<p>This function starts the vmm. Before the VMM can be started, it must first be loaded.</p>
<dl class="section return"><dt>Returns</dt><dd>BF_SUCCESS on success, negative error code on failure </dd></dl>

<p>Definition at line <a class="el" href="common_8c_source.html#l00528">528</a> of file <a class="el" href="common_8c_source.html">common.c</a>.</p>

</div>
</div>
<a class="anchor" id="ab3b71a06efab28d0a2eb753d694398cc"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int64_t common_stop_vmm </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Stop VMM</p>
<p>This function stops the vmm. Before a VMM can be stopped, it must first be loaded, and running.</p>
<dl class="section return"><dt>Returns</dt><dd>BF_SUCCESS on success, negative error code on failure </dd></dl>

<p>Definition at line <a class="el" href="common_8c_source.html#l00572">572</a> of file <a class="el" href="common_8c_source.html">common.c</a>.</p>

</div>
</div>
<a class="anchor" id="abf236e7b72c0c1569af1cbe809b6d485"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int64_t common_dump_vmm </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structdebug__ring__resources__t.html">debug_ring_resources_t</a> **&#160;</td>
          <td class="paramname"><em>user_drr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Dump VMM</p>
<p>This grabs the conents of the debug ring, and dumps the contents to the driver entry's console. This is one of a couple of ways to get feedback from the VMM. Note that the VMM must at least be loaded for this function to work as it has to do a symbol lookup</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">user_drr</td><td>a pointer to the drr provided by the user </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>BF_SUCCESS on success, negative error code on failure </dd></dl>

<p>Definition at line <a class="el" href="common_8c_source.html#l00609">609</a> of file <a class="el" href="common_8c_source.html">common.c</a>.</p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a class="anchor" id="aebaeb76dfd117be41a7509cf76a09429"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int64_t g_vmm_status = <a class="el" href="driver__entry__interface_8h.html#a9554436108723afdf5f8fd7996909bd0">VMM_UNLOADED</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="common_8c_source.html#l00036">36</a> of file <a class="el" href="common_8c_source.html">common.c</a>.</p>

</div>
</div>
<a class="anchor" id="aece5121b2c037e04e651b2847773ae31"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t g_num_modules = 0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="common_8c_source.html#l00038">38</a> of file <a class="el" href="common_8c_source.html">common.c</a>.</p>

</div>
</div>
<a class="anchor" id="a641c3e887c4d48e8b28bb74e8b3bc383"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structmodule__t.html">module_t</a> g_modules[<a class="el" href="constants_8h.html#ab5fdce3a6fd51066fb321ec67ef032cf">MAX_NUM_MODULES</a>] = {{0}}</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="common_8c_source.html#l00039">39</a> of file <a class="el" href="common_8c_source.html">common.c</a>.</p>

</div>
</div>
<a class="anchor" id="a1a991051ee87c726087c41cffc70a9b3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structbfelf__loader__t.html">bfelf_loader_t</a> g_loader</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="common_8c_source.html#l00041">41</a> of file <a class="el" href="common_8c_source.html">common.c</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Wed Apr 20 2016 18:22:03 by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.12
</small></address>
</body>
</html>
